export const indianCities = [
  "Mumbai", "Delhi", "Bangalore", "Hyderabad", "Ahmedabad", "Chennai", "Kolkata", 
  "Surat", "Pune", "Jaipur", "Lucknow", "Kanpur", "Nagpur", "Indore", "Thane",
  "Bhopal", "Visakhapatnam", "Pimpri-Chinchwad", "Patna", "Vadodara", "Ghaziabad",
  "Ludhiana", "Agra", "Nashik", "Faridabad", "Meerut", "Rajkot", "Kalyan-Dombivli",
  "Vasai-Virar", "Varanasi", "Srinagar", "Aurangabad", "Dhanbad", "Amritsar",
  "Navi Mumbai", "Allahabad", "Ranchi", "Howrah", "Coimbatore", "Jabalpur",
  "Gwalior", "Vijayawada", "Jodhpur", "Madurai", "Raipur", "Kota", "Chandigarh",
  "Guwahati", "Solapur", "Hubli-Dharwad", "Bareilly", "Mysore", "Tiruchirappalli",
  "Aligarh", "Bhubaneswar", "Salem", "Warangal", "Guntur", "Bhiwandi", "Saharanpur",
  "Gorakhpur", "Bikaner", "Amravati", "Noida", "Jamshedpur", "Bhilai", "Cuttack",
  "Firozabad", "Kochi", "Nellore", "Bhavnagar", "Dehradun", "Durgapur", "Asansol",
  "Rourkela", "Nanded", "Kolhapur", "Ajmer", "Akola", "Gulbarga", "Jamnagar",
  "Ujjain", "Loni", "Siliguri", "Jhansi", "Ulhasnagar", "Jammu", "Sangli-Miraj",
  "Mangalore", "Erode", "Belgaum", "Ambattur", "Tirunelveli", "Malegaon", "Gaya",
  "Jalgaon", "Udaipur", "Maheshtala", "Davanagere", "Kozhikode", "Kurnool", "Rajpur",
  "Rajahmundry", "Bokaro", "South Dumdum", "Bellary", "Patiala", "Gopalpur", "Agartala",
  "Bhagalpur", "Muzaffarnagar", "Bhatpara", "Panihati", "Latur", "Dhule", "Tirupati",
  "Rohtak", "Korba", "Bhilwara", "Berhampur", "Muzaffarpur", "Ahmednagar", "Mathura",
  "Kollam", "Avadi", "Kadapa", "Kamarhati", "Bilaspur", "Shahjahanpur", "Satara",
  "Bijapur", "Rampur", "Shivamogga", "Chandrapur", "Junagadh", "Thrissur", "Alwar",
  "Bardhaman", "Kulti", "Kakinada", "Nizamabad", "Parbhani", "Tumkur", "Hisar",
  "Ozhukarai", "Bihar Sharif", "Panipat", "Darbhanga", "Bally", "Aizawl", "Dewas",
  "Ichalkaranji", "Tirupur", "Karnal", "Bathinda", "Jalna", "Barasat", "Kirari Suleman Nagar",
  "Purnia", "Satna", "Mau", "Sonipat", "Farrukhabad", "Sagar", "Rourkela", "Durg",
  "Imphal", "Ratlam", "Hapur", "Arrah", "Karimnagar", "Anantapur", "Etawah", "Ambernath",
  "North Dumdum", "Bharatpur", "Begusarai", "New Delhi", "Gandhinagar", "Baranagar",
  "Tiruvottiyur", "Pondicherry", "Sikar", "Thoothukudi", "Rewa", "Mirzapur", "Raichur",
  "Pali", "Ramagundam", "Haridwar", "Vijayanagaram", "Katihar", "Nagercoil", "Sri Ganganagar",
  "Karawal Nagar", "Mango", "Thanjavur", "Bulandshahr", "Uluberia", "Murwara", "Sambhal",
  "Singrauli", "Nadiad", "Secunderabad", "Naihati", "Yamunanagar", "Bidhan Nagar",
  "Pallavaram", "Bidar", "Munger", "Panchkula", "Burhanpur", "Raurkela Industrial Township",
  "Kharagpur", "Dindigul", "Gandhidham", "Hospet", "Nangloi Jat", "Malda", "Ongole",
  "Deoghar", "Chapra", "Haldia", "Khandwa", "Nandyal", "Morena", "Amroha", "Anand",
  "Bhind", "Bhalswa Jahangir Pur", "Madhyamgram", "Bhiwani", "Berhampore", "Ambala",
  "Mori Gate", "Fatehpur", "Raebareli", "Khora", "Chittoor", "Bhusawal", "Orai",
  "Bahraich", "Phusro", "Vellore", "Mehsana", "Raiganj", "Sirsa", "Danapur", "Serampore",
  "Sultan Pur Majra", "Guna", "Jaunpur", "Panvel", "Shivpuri", "Surendranagar Dudhrej",
  "Unnao", "Hugli-Chinsurah", "Alappuzha", "Kottayam", "Machilipatnam", "Shillong",
  "Bhimavaram", "New Bombay", "Mandsaur", "Kumbakonam", "Alandur", "Tinsukia", "Titagarh",
  "Chandannagar", "Karaikudi", "Kishanganj", "Bongaon", "Fatehpur", "Deoli", "Jorhat",
  "Saharsa", "Silchar", "Dharmavaram", "Medininagar", "Gandhi Nagar", "Baran", "Hajipur",
  "Port Blair", "Proddatur", "Bhadravati", "Buxar", "Nagaon", "Bhatinda", "Karaikal",
  "Abohar", "Tadepalligudem", "Jalpaiguri", "Gurgaon", "Sasaram", "Hazaribagh", "Hoshiarpur",
  "Balurghat", "Tarn Taran", "Guntakal", "Santipur", "Kendujhar", "Suryapet", "Motihari",
  "Dharmapuri", "Gudivada", "Phagwara", "Narasaraopet", "Srikakulam", "Mahbubnagar",
  "Adoni", "Udgir", "Tenali", "Kadiri", "Jagdalpur", "Kishangarh", "Bodhan", "Jagtial",
  "Ballia", "Jangaon", "Tadpatri", "Mancherial", "Kannur", "Firozpur", "Zirakpur"
];

// Function to find similar cities using Levenshtein distance
export const findSimilarCities = (inputCity, cities = indianCities, maxDistance = 2) => {
  if (!inputCity || inputCity.length < 2) return [];
  
  const input = inputCity.toLowerCase();
  
  // First, try exact match
  const exactMatch = cities.find(city => city.toLowerCase() === input);
  if (exactMatch) return [exactMatch];
  
  // Then try starts with
  const startsWith = cities.filter(city => 
    city.toLowerCase().startsWith(input)
  );
  if (startsWith.length > 0) return startsWith.slice(0, 5);
  
  // Then try includes
  const includes = cities.filter(city => 
    city.toLowerCase().includes(input)
  );
  if (includes.length > 0) return includes.slice(0, 5);
  
  // Finally, use Levenshtein distance for fuzzy matching
  const similarCities = cities
    .map(city => ({
      city,
      distance: levenshteinDistance(input, city.toLowerCase())
    }))
    .filter(item => item.distance <= maxDistance)
    .sort((a, b) => a.distance - b.distance)
    .map(item => item.city)
    .slice(0, 5);
  
  return similarCities;
};

// Levenshtein distance algorithm for fuzzy matching
const levenshteinDistance = (str1, str2) => {
  const matrix = [];
  
  // Initialize matrix
  for (let i = 0; i <= str2.length; i++) {
    matrix[i] = [i];
  }
  for (let j = 0; j <= str1.length; j++) {
    matrix[0][j] = j;
  }
  
  // Fill matrix
  for (let i = 1; i <= str2.length; i++) {
    for (let j = 1; j <= str1.length; j++) {
      if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
        matrix[i][j] = matrix[i - 1][j - 1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j - 1] + 1, // substitution
          matrix[i][j - 1] + 1,     // insertion
          matrix[i - 1][j] + 1      // deletion
        );
      }
    }
  }
  
  return matrix[str2.length][str1.length];
};

// Function to auto-correct city name
export const autoCorrectCity = (inputCity) => {
  if (!inputCity) return '';
  
  const similarCities = findSimilarCities(inputCity, indianCities, 3);
  return similarCities.length > 0 ? similarCities[0] : inputCity;
};